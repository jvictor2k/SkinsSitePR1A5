@model List<InventarioItemDetalheViewModel>

<style>
    .crop-container {
        overflow: hidden;
        position: relative;
        width: 100%;
        padding-top: 100%; /* Aspect ratio 1:1 (altura/largura) */
    }

        .crop-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que a imagem cubra todo o container mantendo o aspect ratio */
        }

    .grayscale {
        filter: grayscale(100%);
    }
</style>

<h1>Todos os Itens em Inventários</h1>
<br />

@if (Model != null)
{
    <div class="grid-container">
        @foreach (var item in Model)
        {
            <div class="grid-item rounded-3 shadow">
                <div class="crop-container">
                    <img class="img-fluid rounded" src="~/images/produtos/@item.Skin.ImagemNome" alt="@item.Skin.DescricaoCurta">
                </div>
                <p id="item-text" class="m-2 p-2" style="font-weight: bold;">@item.Skin.DescricaoCurta</p>
                @if (item.InventarioItem.Solicitado == true)
                {
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-success w-100 mb-2 pb-2" data-bs-toggle="modal" data-bs-target="#modal_@item.InventarioItem.InventarioItemId">
                        Solicitado
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="modal_@item.InventarioItem.InventarioItemId" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Informações de Envio</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body text-start mx-3">

                                    @{
                                        string estadoCompleto = string.Empty;

                                        switch (item.Skin.Estado)
                                        {
                                            case "BS":
                                                estadoCompleto = "Battle-Scarred";
                                                break;
                                            case "WW":
                                                estadoCompleto = "Well-Worn";
                                                break;
                                            case "FT":
                                                estadoCompleto = "(ield-Tested";
                                                break;
                                            case "MW":
                                                estadoCompleto = "Minimal Wear";
                                                break;
                                            case "FN":
                                                estadoCompleto = "Factory New";
                                                break;
                                            default:
                                                estadoCompleto = "-";
                                                break;
                                        }

                                        string floatFormatado = item.Skin.SkinFloat.ToString();

                                        if (item.Skin.Estado == "FN")
                                        {
                                            floatFormatado = "0,0" + item.Skin.SkinFloat;
                                        }
                                        else if (item.Skin.Estado == "MW" && floatFormatado[0] != '1')
                                        {
                                            floatFormatado = "0,0" + item.Skin.SkinFloat;
                                        }
                                        else
                                        {
                                            floatFormatado = "0," + item.Skin.SkinFloat;
                                        }

                                        string exibicaoFinal = item.Skin.Multiplas ? "Aleatório" : floatFormatado;
                                    }

                                    <h5>@item.Skin.DescricaoCurta</h5>
                                    <br>
                                    <p>Float: @exibicaoFinal</p>
                                    <p>@("Pedido: " + item.Pedido.PedidoId)</p>
                                    <p>@("Cliente: " + item.Pedido.Nome + " " + item.Pedido.Sobrenome)</p>
                                    <p>@("Telefone: " + item.Pedido.Telefone)</p>
                                    <p>@("Email: " + item.Pedido.Email)</p>
                                    <br>
                                    <b>Trade Link da Steam:</b>
                                    <br>
                                    <br>
                                    <p>@item.InventarioItem.TradeLink</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="alert alert-light" role="alert">
                        Não solicitado
                    </div>
                }
            </div>
        }
    </div>
}
else
{
    <p>Nenhum item de inventário disponível.</p>
}