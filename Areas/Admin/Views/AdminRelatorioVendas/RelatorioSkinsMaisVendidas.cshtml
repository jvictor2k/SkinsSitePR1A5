@model IEnumerable<SkinsSite.Models.PedidoDetalhe>

<h2>Skins Mais Vendidas</h2>

<nav class="navbar navbar-dark">
    <div class="container-fluid">
        <form class="navbar-form navbar-left">
            <div class="form-group">
                <label for="minDate">Data Inicial</label>
                <input type="date" class="form-control" name="minDate" value=@ViewData["minDate"] />
            </div>
            <div class="form-group">
                <label for="maxDate">Data Final</label>
                <input type="date" class="form-control" name="maxDate" value=@ViewData["maxDate"] />
            </div>
            <br />
            <button type="submit" class="btn btn-success">Filtrar</button>
        </form>
    </div>
</nav>

@{
    var skinsMaisVendidas = Model
        .GroupBy(pd => pd.SkinId)
        .Select(grp => new { SkinId = grp.Key, Vendas = grp.Sum(s => s.Quantidade), PedidoDetalhes = grp.ToList() });
}

@foreach (var skin in skinsMaisVendidas)
{
    <h3>@skin.SkinId - Vendas: @skin.Vendas</h3>

    foreach (var pedidoDetalhe in skin.PedidoDetalhes)
    {
        var pedido = pedidoDetalhe.Pedido;
        var skinItem = pedidoDetalhe.Skin;

        <h4>Skin ID: @skinItem.SkinId</h4>
        <p>Nome: @skinItem.Nome</p>
        <p>Preço: @pedidoDetalhe.Preco</p>
        <p>Quantidade Vendida: @pedidoDetalhe.Quantidade</p>
        <!-- Outros detalhes da Skin ou do PedidoDetalhe que você deseja exibir -->
        <hr />
    }
}